{"version":3,"sources":["components/notice/Notice.jsx","components/topbar/Topbar.jsx","components/Friend/Friend.jsx","components/sidebar/Sidebar.jsx","components/share/Share.jsx","components/post/Post.jsx","components/feed/Feed.jsx","components/online/Online.jsx","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","apiCalls.js","context/AuthReducer.js","context/AuthContext.js","pages/login/Login.jsx","dummyData.js","components/popup/Popup.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/conversations/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/\bmessenger/Messenger.jsx","pages/singlePost/SinglePost.jsx","App.js","index.js"],"names":["Notice","notices","useState","allNotices","setAllNotices","user","JSON","parse","localStorage","getItem","acceptLoading","setAcceptLoading","hasMore","setHasMore","page","setPage","history","useHistory","useEffect","length","handleLink","notice","a","console","log","axios","put","_id","res","data","object","push","pathname","senderUsername","get","senderId","receiverId","state","chat","postId","updateNotice","fetchData","prevNotices","getNotification","className","id","dataLength","next","loader","CircularProgress","size","endMessage","style","textAlign","scrollThreshold","scrollableTarget","map","n","onClick","read","includes","color","src","senderPic","alt","EmojiPeopleRounded","htmlColor","format","createdAt","AddPhotoAlternate","Button","backgroundColor","marginRight","e","stopPropagation","delete","newNotice","profilePicture","username","post","action","window","location","reload","acceptFriendRequest","Chat","Favorite","Topbar","search","setSearch","display","setDisplay","results","setResults","searching","setSearching","noticePopup","setNoticePopup","setNotices","setNewNotice","wrapperRef","useRef","reduce","val","document","addEventListener","handleClickOuteside","removeEventListener","event","wrap","current","contains","target","cancel","cancelToken","CancelToken","c","searchResult","to","textDecoration","ref","Search","placeholder","onChange","value","MenuItem","href","Notifications","ExitToApp","clear","Friend","Sidebar","setUser","fetchUser","RssFeed","PlayCircleFilledOutlined","Group","Bookmark","HelpOutline","WorkOutline","Event","School","u","Share","file","setFile","isLoading","setIsLoading","desc","URL","createObjectURL","Cancel","onSubmit","preventDefault","newPost","userId","form","FormData","append","fetch","method","headers","Authorization","body","then","json","link","img","uploadFile","directpost","followers","go","sendNotice","err","htmlFor","PermMedia","type","accept","files","Label","Room","EmojiEmotions","disabled","Post","likes","like","setLike","isLiked","setIsLiked","currentComment","setCurrentComment","currentUser","hideComment","setHideComment","sendComment","key","datenow","Date","commentData","userName","userPic","comment","date","likeHandler","likePost","showComment","MoreVert","ThumbUpOutlined","ChatBubbleOutline","onKeyPress","Feed","posts","setPosts","fetchPosts","sort","p1","p2","prevPosts","p","Online","friend","setFriend","getUser","Rightbar","friends","setFriends","followed","setFollowed","setState","stateIcon","setStateIcon","onlineUsers","setOnlineUsers","socket","resFriend","resPending","userFriends","isFriend","find","PersonAdd","PersonAddDisabled","RecordVoiceOver","checkFriendAndPending","io","process","emit","on","users","filter","f","some","friendList","getFriends","handleClick","setItem","stringify","sendPending","HomeRightbar","ProfileRightbar","startIcon","marginBottom","marginTop","fontSize","alignItems","padding","city","from","relationship","Home","LoginCall","userCredential","dispatch","interceptors","request","use","config","jwt_decode","user_data","payload","AuthReducer","isFetching","error","followings","following","INITIAL_STATE","AuthContext","createContext","AuthContextProvider","children","useReducer","Provider","Login","email","password","useContext","required","minLength","response","message","Countries","City","Popup","props","trigger","Profile","popup","setPopup","useParams","editProfile","setEditProfile","editCover","setEditCover","country","handleEditFile","coverUrl","profileUrl","undefined","url","coverPicture","updateResult","Message","setChat","Edit","IconButton","HighlightOff","PhotoLibrary","TextField","width","defaultValue","inputRef","LocationCity","name","Language","cn","FavoriteBorder","Register","passwordAgain","setError","maxLength","setCustomValidity","Conversation","conversation","friendId","members","m","own","text","ChatOnline","currentId","switchChat","setCurrentChat","setOnlineFriends","o","Messenger","useLocation","conversations","setConversations","currentChat","currentData","setCurrentData","messages","setMessages","arrivalMessage","setArrivalMessage","newMessage","scrollRef","sender","now","prev","getMessages","getConversations","scrollIntoView","behavior","handleSubmit","conversationId","member","enterSubmit","SinglePost","setPost","getPost","App","token","defaults","baseURL","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.daa3062b.chunk.js","sourcesContent":["import './notice.css'\nimport { Button,CircularProgress } from '@material-ui/core'\nimport { EmojiPeopleRounded,Chat,AddPhotoAlternate,Favorite } from '@material-ui/icons';\nimport {format} from 'timeago.js'\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { useState } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { useEffect } from 'react';\nexport default function Notice({notices}) {\n    const [allNotices,setAllNotices] = useState(notices)\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    const [acceptLoading,setAcceptLoading] =useState(false)\n    const [hasMore, setHasMore] = useState(true)\n    const [page ,setPage] = useState(1)\n    const history = useHistory();\n    useEffect(() => {\n        if(notices.length===0){\n            setHasMore(false)\n        }\n    }, [notices])\n    const handleLink = (notice)=>{\n        //readAPI      \n        //\bread\n        const updateNotice = async()=>{\n            console.log(\"test\")\n            const res = await axios.put('/api/notice/update/'+notice._id)\n            console.log(res.data.data)\n            if(notice.object === 'post' || notice.object==='friendRequest'|| notice.object==='friendAccepted'){\n                history.push({\n                    pathname:\"/profile/\"+notice.senderUsername\n                })\n            }\n            else if(notice.object ==='message'){\n                let res = await axios.get(`/api/conversations/find/${notice.senderId}/${notice.receiverId[0]}`);\n                history.push({\n                    pathname: '/messenger',\n                    state: { chat: res.data.data }\n                })\n            }\n            else if(notice.object ==='comment' || notice.object ==='like'){\n                history.push({\n                    pathname:'/post/'+notice.postId\n                })\n            }\n        }\n        updateNotice()     \n    }\n    const acceptFriendRequest = (e,notice)=>{\n        e.stopPropagation();\n        setAcceptLoading(true)\n        console.log(notice)\n        // pending\n        const action = async()=>{\n            const addFriend = await axios.put(\"/api/users/friend/\"+notice.senderId)\n            const deleteNotice = await axios.delete('/api/notice/delete/'+notice._id)\n            const deletePending = await axios.delete('/api/users/pending/'+notice.senderId)\n            const newNotice = {\n                senderId : user._id,\n                object : \"friendAccepted\",\n                senderPic : user.profilePicture,\n                senderUsername : user.username,\n                receiverId: notice.senderId\n            }\n            const sendNotice = await axios.post('/api/notice',newNotice)\n            //window.location.reload()\n            // console.log(addFriend.data.data)\n            // console.log(deleteNotice.data.data)\n            // console.log(deletePending.data.data)\n            // console.log(sendNotice.data.data)\n            setAcceptLoading(false)\n        }\n        action()\n        window.location.reload()\n    }\n    const fetchData = async()=>{\n        console.log(\"trigger\")\n        const getNotification = async()=>{\n            try{\n                 const res = await axios('/api/notice/'+user._id+\"/\"+page)\n                 console.log(res.data.data)\n                 if(res.data.data.length===0){\n                     setHasMore(false)\n                 }\n                 \n                 setAllNotices (prevNotices=>{\n                     return([...prevNotices,...res.data.data])\n                 });\n                 console.log(notices)\n                 setPage(page+1)\n                 console.log(page)\n            }catch(err){\n                console.log(err)\n            }\n        } \n        getNotification()\n    }\n    return (\n        <div className=\"notice\" id=\"scrollableDiv\">\n            <div className=\"noticeWrapper\">\n                <div className=\"noticeTop\">\n                    <h1></h1>\n                </div>\n                <div className=\"noticeCenter\" >\n                                \n                    <InfiniteScroll\n                        className=\"feedScrollbar\"\n                        dataLength={allNotices.length} //This is important field to render the next data\n                        next={fetchData}\n                        hasMore={hasMore}\n                        loader={<div className=\"onLoading\"><CircularProgress  size=\"20px\"/></div>}\n                        endMessage={\n                        <p style={{ textAlign: 'center' }}>\n                            <b> \"\" </b>\n                        </p>\n                        }\n                        scrollThreshold=\"95%\"\n                        scrollableTarget=\"scrollableDiv\"\n                    >\n                    {allNotices && allNotices.map( (n) =>{\n                        switch(n.object){\n                            case 'friendAccepted':\n                                return(\n                                    <div className=\"noticeMessage\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <EmojiPeopleRounded  htmlColor=\"white\" className=\"noticeTypeImgFriend\" />\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b></span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                    </div>\n                                )\n                            case 'post':\n                                return(\n                                    <div className=\"noticeMessage\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <AddPhotoAlternate  htmlColor=\"white\" className=\"noticeTypeImgPost\"/>\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b> </span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                    </div>\n                                )\n                            case 'friendRequest':\n                                return(\n                                    <div className=\"noticeMessageFriend\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className =\"noticeMessageFriendContent\">\n                                            <div className=\"noticeMessageCotentLeft\">\n                                                <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                                <EmojiPeopleRounded  htmlColor=\"white\" className=\"noticeTypeImgFriend\"/>\n                                            </div>\n                                            <div className=\"noticeMessageCotentRight\">\n                                                <span><b>{n.senderUsername}</b></span>\n                                                <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                            </div>\n                                        </div>\n                                        <div className= \"noticeMessageFriendRequest\">\n                                            <Button  style={{backgroundColor:\"#1877F2\",color:\"white\",marginRight:\"20px\"}} onClick={(e)=>acceptFriendRequest(e,n)}>\n                                                {acceptLoading ? <CircularProgress color=\"white\" size=\"20px\"/> : \"\"}\n                                            </Button>\n                                            <Button  style={{backgroundColor:\"#E4E6EB\"}}></Button>\n                                        </div>\n                                    </div>\n                                )\n                            case 'message':\n                                return(\n                                    <div className=\"noticeMessage\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <Chat htmlColor=\"white\" className=\"noticeTypeImgMessage\"/>\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b></span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                        \n                                    </div>\n                                )\n                            case 'comment':\n                                return(\n                                    <div className=\"noticeMessage\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <Chat  htmlColor=\"white\" className=\"noticeTypeImgPost\"/>\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b></span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                        \n                                    </div>\n                                )\n                            case 'like':\n                                return(\n                                    <div className=\"noticeMessage\" key={n._id} onClick={()=>handleLink(n)} style={n.read.includes(user._id) ?{color:\"gray\"}:{}}>\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <Favorite  htmlColor=\"white\" className=\"noticeTypeImgLike\"/>\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b></span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                        \n                                    </div>\n                                )\n                            default:\n                                return(\n                                    <div className=\"noticeMessage\">\n                                        <div className=\"noticeMessageCotentLeft\">\n                                            <img src={n.senderPic!==\"\" ? n.senderPic : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"noticeImg\" />\n                                            <Chat  htmlColor=\"white\" className=\"noticeTypeImgMessage\"/>\n                                        </div>\n                                        <div className=\"noticeMessageCotentRight\">\n                                            <span><b>{n.senderUsername}</b></span>\n                                            <span className=\"noticeTimestamp\">{format(n.createdAt)}</span>\n                                        </div>\n                                        \n                                    </div>\n                                )\n                        }\n                    })}\n                    </InfiniteScroll>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import \"./topbar.css\"\nimport Notice  from '../notice/Notice'\nimport { Search,Person,Chat,Notifications,ExitToApp} from \"@material-ui/icons\"\nimport { MenuItem,CircularProgress} from \"@material-ui/core\";\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useRef } from \"react\";\nexport default function Topbar(){\n    let history = useHistory();\n    //const [member,setMember] = useState({});\n    const [search, setSearch] = useState(\"\");\n    const [display,setDisplay] = useState(false);\n    const [results,setResults] = useState([]);\n    const [searching,setSearching] = useState(false);\n    const [noticePopup,setNoticePopup] = useState(false)\n    const [notices,setNotices] = useState(null)\n    const [newNotice,setNewNotice] = useState(null)\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    const wrapperRef = useRef(null) //\n    //notification\n    useEffect(()=>{\n       const getNotification = async()=>{\n           try{\n                const res = await axios('/api/notice/'+user._id+\"/\"+0)\n                setNotices(res.data.data)\n                console.log()\n                setNewNotice(res.data.data.reduce(function(n, val) {\n                    return n + (!val.read.includes(user._id));\n                }, 0))\n           }catch(err){\n               console.log(err)\n           }\n       } \n       getNotification()\n    },[])\n    //\n    useEffect(()=>{\n        document.addEventListener('mousedown',handleClickOuteside)\n        return ()=>{\n            document.removeEventListener('mousedown',handleClickOuteside)\n        };\n    },[]);\n\n    const handleClickOuteside = event =>{\n        const {current:wrap} = wrapperRef;\n        if (wrap&& !wrap.contains(event.target)){\n            setDisplay(false);\n        }\n    }\n\n    const signout = () =>{\n        localStorage.clear();\n        history.push('/login')\n        //window.location.reload()\n    }\n    //console.log(member.city)\n    //user token\n    useEffect(()=>{\n        if (search===\"\"){\n\n        }else{\n            let cancel\n            setSearching(true)\n            const searching = async()=>{\n                try{\n                    const searchResult = await axios.get('api/users/search/'+search,{\n                        cancelToken: new axios.CancelToken(c => cancel = c)\n                    })\n                    setResults(searchResult.data.data)\n                    setSearching(false)\n                }catch(err){\n                    console.log(err)\n                    setSearching(false)\n                    setResults([])\n                }\n            };\n            searching()\n            return () => cancel()\n        }\n    },[search])\n    //\n    return(\n        <div className=\"topbarContainer\">\n            <div className=\"topbarLeft\">\n                <Link to=\"/\" style={{textDecoration:\"none\"}}>\n                <span className=\"logo\">HardCo.Social</span>\n                </Link>\n            </div>\n            <div className=\"topbarCenter\" ref={wrapperRef}>\n                <div className=\"searchbar\">\n\n                    <Search className=\"searchIcon\" />\n                    <input\n                        placeholder=\"\"\n                        className=\"searchInput\"\n                        onChange={(e)=>setSearch(e.target.value)}\n                        onClick ={()=>setDisplay(!display)}\n                    />\n                </div>\n                {display &&(\n                    <div className=\"autoContainer\">\n\n                        {results.map((value)=>{\n                            return(\n                                <div onClick={() => history.push(\"/profile/\"+value.username)} key={value._id}>\n                                    <MenuItem className=\"searchItem\">\n                                        <img src={value.profilePicture!==\"\"? value.profilePicture:\"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"topbarImg\" />\n                                        {value.username}\n                                    </MenuItem>\n                                </div>\n                                \n                            )\n                        })}\n                            {searching? <div className=\"onSearch\"><CircularProgress color=\"gray\" size=\"30px\"/> </div>: null}\n                    </div>\n                 )}  \n                \n            </div>\n            <div className=\"topbarRight\">\n                {/* <div className=\"topbarLinks\">\n                </div> */}\n                <div className=\"topbarIcons\">\n                    {/* <div className=\"topbarIconItem\">\n                        <Person/>\n                        <span className=\"topbarIconBadge\">1</span>\n                    </div> */}\n                    {/* <Link to={\"/messenger\"} style={{textDecoration:\"none\" ,color:\"inherit\"}}>\n                    <div className=\"topbarIconItem\">\n                        <Chat/>\n                    </div>\n                    </Link> */}\n                    \n                    {noticePopup &&(\n                        <Notice notices = {notices} />\n                 )}  \n                </div>\n                <div onClick={() => {window.location.href=\"/profile/\"+user.username}}>\n                <img src={user.profilePicture ? user.profilePicture : \"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" className=\"topbarImg\" />\n                </div>\n                <div className=\"topbarIconItem\" onClick={()=>setNoticePopup(!noticePopup)}>\n                        <Notifications/>\n\n                        {\n                            //notices read= false \n                            newNotice!==0 && \n                            <span className=\"topbarIconBadge\">\n                                { newNotice }\n                            </span>\n                            \n                        }              \n                </div>\n                <div className=\"topbarIconItem\">\n                        <ExitToApp/>\n                        <span onClick={signout}></span>\n                </div>\n            </div>\n        </div>\n    )\n}","import { useHistory } from 'react-router-dom'\nimport './friend.css'\n\nexport default function Friend({user}) {\n    const history = useHistory\n    return (\n        <div onClick={() => history.push(\"/profile/\"+user.username)}>\n            <li className=\"sidebarFriend\">\n                <img src={user.profilePicture === \"\" ? \"https://i.imgur.com/HeIi0wU.png\" : user.profilePicture}  alt=\"\" className=\"sidebarFriendImg\" />\n                <span className=\"sidebarFriendName\">{user.username}</span>\n            </li>\n        </div>\n    )\n}\n","import './sidebar.css'\nimport {RssFeed,Group,Bookmark,HelpOutline,WorkOutline,Event,Chat,School,PlayCircleFilledOutlined} from '@material-ui/icons'\nimport Friend from '../Friend/Friend'\nimport { useEffect } from 'react'\nimport axios from 'axios'\nimport { useState } from 'react'\nimport { Link } from 'react-router-dom'\nexport default function Sidebar(){\n    const [user,setUser] = useState([])\n    useEffect(()=>{\n        const fetchUser = async ()=>{\n            const res = await axios.get(\n                '/api/users/recommend',\n                // config\n            )\n            setUser(res.data.data)\n        };\n        fetchUser()      \n    },[])\n    return(\n        <div className=\"sidebar\">\n            <div className=\"sidebarWrapper\">\n                <ul className=\"sidebarList\">\n                    <li className=\"sidebarListItem\">\n                        <RssFeed className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Feed</span>\n                    </li>\n                    <Link to=\"/messenger\" style={{textDecoration:\"none\" ,color:\"inherit\"}}>\n                    <li className=\"sidebarListItem\">\n                        <Chat className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\"></span>\n                    </li>\n                    </Link>\n                    <li className=\"sidebarListItem\">\n                        <PlayCircleFilledOutlined className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Videos</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <Group className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Groups</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <Bookmark className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Bookmarks</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <HelpOutline className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Questions</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <WorkOutline className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Jobs</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <Event className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Events</span>\n                    </li>\n                    <li className=\"sidebarListItem\">\n                        <School className=\"sidebarIcon\"/>\n                        <span className=\"sidebarListItemText\">Courses</span>\n                    </li>\n                </ul>\n                <button className=\"sidebarButton\"></button>\n                <hr className=\"sidebarHr\"/>\n                <ul className=\"sidebarFriendList\">\n                <h4 className=\"rightbarTitle\"></h4>\n                    {user.map(u=>(\n                        <Friend user={u} key={u._id}/>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    )\n}","import './share.css'\nimport {PermMedia,Label,Room,EmojiEmotions,Cancel}  from '@material-ui/icons'\nimport { CircularProgress } from '@material-ui/core'\nimport { useState, useRef } from 'react'\nimport axios from 'axios'\nimport { useHistory } from 'react-router-dom'\nexport default function Share() {\n    const history = useHistory();\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    const [file,setFile] = useState(null);\n    const [isLoading,setIsLoading] = useState(false);\n    const desc = useRef()\n    //upload img to server\n    // server\n    //console.log(file)\n    const submitHandler = (e) =>{\n        setIsLoading(true)\n        e.preventDefault()\n        const newPost = {\n            userId: user._id,\n            desc: desc.current.value\n        }\n        const form = new FormData()\n        form.append(\"image\",file)\n        \n        console.log(form)\n        try{\n            if(file!==null){\n                console.log(\"yespic\")\n                //axios.post(\"/api/posts\",newPost)\n                //window.location.reload()\n                const uploadFile = async()=>{\n                    await fetch(\"https://api.imgur.com/3/image/\",{\n                        method:\"post\",\n                        headers:{\n                            Authorization:\"Client-ID 9235f4e0c03ab68\" \n                        }\n                        ,body:form\n                    }).then(data=>data.json().then(data=>{\n                        console.log(data.data.link)\n                        axios.post(\"/api/posts\",{\n                            userId: user._id,\n                            desc: desc.current.value,\n                            img: data.data.link\n                        })\n                    }))\n                }\n                uploadFile()\n            }\n            else{\n                const directpost = async ()=>{\n                    await axios.post(\"/api/posts\",newPost)\n                }\n                directpost()\n            }\n            //notification\n            const  sendNotice = async ()=>{\n                const notice = {\n                    senderId : user._id,\n                    object : \"post\",\n                    senderPic : user.profilePicture,\n                    senderUsername : user.username,\n                    receiverId: user.followers\n                }\n                await axios.post('/api/notice',notice)\n                setIsLoading(false)\n                history.go(0)\n            }\n            sendNotice()\n        }catch(err){\n\n        }\n    }\n    return (\n        <div className=\"share\">\n            <div className=\"shareWrapper\">\n                <div className=\"shareTop\">\n                <img src={ user.profilePicture? user.profilePicture : \"https://i.imgur.com/HeIi0wU.png\" } alt=\"\"  className=\"shareProfileImg\" />\n                    <input \n                        placeholder={\"? \"+ user.username}\n                        className=\"shareInput\"\n                        ref={desc}\n                    />\n                </div>\n                <hr className=\"shareHr\"/>\n                {\n                    file &&(\n                        <div className=\"shareImgContainer\">\n                            <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\"/>\n                            <Cancel className=\"shareCancelImg\" onClick={()=>setFile(null)} />\n                        </div>\n                    )\n                }\n                <form className=\"shareBottom\" onSubmit={submitHandler}>\n                    <div className=\"shareOptions\">\n                        <label htmlFor=\"file\" className=\"shareOption\">\n                            <PermMedia htmlColor=\"tomato\" className=\"shareIcon\"/>\n                            <span className=\"shareOptionText\">Photo or Video</span>\n                            <input \n                                style= {{display:\"none\"}}\n                                type=\"file\" id=\"file\" \n                                accept=\".png,.jpeg,.jpg\" \n                                onChange={(e)=>setFile(e.target.files[0])}\n                            />\n                        </label>\n                        <div className=\"shareOption\">\n                            <Label htmlColor=\"blue\" className=\"shareIcon\"/>\n                            <span className=\"shareOptionText\">Tag</span>\n                        </div>\n                        <div className=\"shareOption\">\n                            <Room htmlColor=\"green\" className=\"shareIcon\"/>\n                            <span className=\"shareOptionText\">Location</span>\n                        </div>\n                        <div className=\"shareOption\">\n                            <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\"/>\n                            <span className=\"shareOptionText\">Feelings</span>\n                        </div>\n                    </div>\n                    <button className=\"shareButton\" type=\"submit\" disabled={isLoading}>{isLoading ? <CircularProgress color=\"white\" size=\"20px\"/> :\"\"}</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n","import \"./post.css\"\nimport { MoreVert,ThumbUpOutlined,ChatBubbleOutline,Share} from \"@material-ui/icons\"\nimport { useState,useEffect} from \"react\"\nimport axios from \"axios\"\nimport {format} from 'timeago.js'\nimport { Link } from \"react-router-dom\"\n//export default function Post({post}) {\nconst Post = (({post})=> {\n    const [user,setUser] = useState({});\n    const [like,setLike] = useState(post.likes.length)\n    const [isLiked,setIsLiked] = useState(false)\n    const [currentComment,setCurrentComment] = useState([])\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"))\n    const [hideComment,setHideComment] = useState('none');\n    //const {user:currentUser} = useContext(AuthContext)\n    //console.log(token)\n    //jwt\n\n    useEffect(()=>{   \n        setIsLiked(post.likes.includes(currentUser._id))\n    },[currentUser._id,post.likes])\n    \n    useEffect(()=>{\n        // const config = {\n        //     headers: { Authorization:\"Bearer \"+token}\n        // };\n        //jwt token\n        // \n        const fetchUser = async ()=>{\n            const res = await axios.get(\n                `/api/users?userId=${post.userId}`,\n                // config\n            )\n            //console.log(res.data)\n            setUser(res.data.data)\n        };\n        fetchUser();\n    },[post.userId]) //render\n\n    const sendComment = async(event)=>{\n        if(event.key === 'Enter'){\n            //API\n            const datenow = new Date()\n            const commentData = {\n                userName : currentUser.username,\n                userPic : currentUser.profilePicture,\n                comment : event.target.value,\n                date: datenow            \n            }\n            const sendComment = await axios.post('api/posts/comment/'+post._id,commentData)\n            setCurrentComment(sendComment.data.data.comment)       \n            post.comment = currentComment\n            event.target.value = \"\"\n            setHideComment('')\n            //\n            if(currentUser._id !== post.userId){\n                const  sendNotice = async ()=>{\n                    const notice = {\n                        senderId : currentUser._id,\n                        object : \"comment\",\n                        senderPic : currentUser.profilePicture,\n                        senderUsername : currentUser.username,\n                        receiverId: post.userId,\n                        postId: post._id\n                    }\n                    await axios.post('/api/notice/post',notice)\n                }\n                sendNotice()\n            }\n        }\n    }\n    const likeHandler= ()=>{\n        try{\n            const likePost = async ()=>{\n                await axios.put('/api/posts/'+post._id+'/like',null)\n            };\n            likePost()\n        }catch(err){\n\n        }\n        //\n        setLike(isLiked ? like-1: like+1)\n        setIsLiked(!isLiked)\n        if(isLiked===false && currentUser._id!==post.userId){\n           //notice\n            const  sendNotice = async ()=>{\n                const notice = {\n                    senderId : currentUser._id,\n                    object : \"like\",\n                    senderPic : currentUser.profilePicture,\n                    senderUsername : currentUser.username,\n                    receiverId: post.userId,\n                    postId: post._id\n                }\n                await axios.post('/api/notice/post',notice)\n            }\n            sendNotice()\n        }\n    }\n    const showComment = ()=>{\n        if (hideComment === \"\"){\n            setHideComment('none')\n        }\n        else{\n            setHideComment('')\n        }\n    }\n    return (\n        <div className=\"post\">\n             <div className=\"postWrapper\">\n                 <div className=\"postTop\">\n                     <div className=\"postTopLeft\">\n                         <Link to={`/profile/${user.username}`}>\n                         \n                         <img src={user.profilePicture ? user.profilePicture : \"https://i.imgur.com/HeIi0wU.png\"}\n                              alt=\"\" \n                              className=\"postProfileImg\"   \n                         />\n                         </Link>\n                         <span className=\"postUsername\">\n                             {user.username}\n                         </span>\n                         <span className=\"postDate\">{format(post.createdAt)}</span>\n                     </div>\n                     <div className=\"postTopRight\">\n                         <MoreVert/>\n                     </div>\n                 </div>\n                 <div className=\"postCenter\">\n                     <span className=\"postText\">{post?.desc}</span>\n                     <img  className=\"postImg\" src={post.img} alt=\"\"/>\n                 </div>\n                 <div className=\"postBottom\">\n                     <div className=\"postBottomLeft\">\n                         <img className=\"likeIcon\" src={\"https://i.imgur.com/5OV5nFE.png\"} onClick={likeHandler} alt=\"\"/>\n                         <img className=\"HeartIcon\" src={\"https://i.imgur.com/a5QV3sX.png\"} onClick={likeHandler} alt=\"\"/>\n                         <span className=\"postLikeCounter\">{like}</span>\n                     </div>\n                     <div className=\"postBottomRight\" onClick={showComment}>\n                         <span className=\"postCommentText\">\n                             {currentComment.length\n                                ? currentComment.length\n                                : post.comment ? post.comment.length :\"0\"\n                             }\n                             \n                        </span>\n                     </div>\n                 </div>\n                 <hr className=\"postHr\"/>\n                 <div className=\"postFunctionArea\">\n                     <div className=\"postFunction\" onClick={likeHandler}>\n                        {isLiked? <ThumbUpOutlined htmlColor=\"tomato\" /> : <ThumbUpOutlined />}\n                        <span className=\"Function\"></span>\n                    </div>\n                    <div className=\"postFunction\" onClick={showComment}>\n                        <ChatBubbleOutline/>\n                        <span className=\"Function\"></span>\n                    </div>\n                    <div className=\"postFunction\">\n                        <Share/>\n                        <span className=\"Function\"></span>\n                    </div>\n                 </div>\n                 <hr className=\"postHr\"/>\n                 {/*  */}\n                 \n                 <div className=\"postComments\" style={{display:hideComment}} >\n                        {currentComment.length\n                            ? currentComment.map((comment)=>{\n                                return(\n                                    <div className=\"postSingleComment\" key={comment._id}>\n                                        <div className=\"postSingleCommentMain\">\n                                            <img \n                                                src={comment.userPic? comment.userPic : \"https://i.imgur.com/HeIi0wU.png\"}\n                                                alt=\"\" \n                                                className=\"postSendCommentImg\"   \n                                            />\n                                            <div className=\"postCommentArea\">\n                                                <span className=\"postCommentUsername\"><b>{comment.userName}</b></span>\n                                                <span className=\"postCommentContent\">{comment.comment}</span>\n                                            </div>\n                                        </div>\n                                        <div className=\"postCommentTime\">\n                                            {format(comment.date)}\n                                        </div>\n                                    </div>\n                                )\n                            })\n                            : post.comment && post.comment.map((comment)=>{\n                                return(\n                                    <div className=\"postSingleComment\" key={comment._id}>\n                                        <div className=\"postSingleCommentMain\">\n                                            <img \n                                                src={comment.userPic? comment.userPic : \"https://i.imgur.com/HeIi0wU.png\"}\n                                                alt=\"\" \n                                                className=\"postSendCommentImg\"   \n                                            />\n                                            <div className=\"postCommentArea\">\n                                                <span className=\"postCommentUsername\"><b>{comment.userName}</b></span>\n                                                <span className=\"postCommentContent\">{comment.comment}</span>\n                                            </div>\n                                        </div>\n                                        <div className=\"postCommentTime\">\n                                            {format(comment.date)}\n                                        </div>\n                                    </div>\n                                )\n                            })         \n                        }            \n                 </div>\n\n                 <div className=\"postSendComment\">\n                        <img src={currentUser.profilePicture ? currentUser.profilePicture : \"https://i.imgur.com/HeIi0wU.png\"}\n                              alt=\"\" \n                              className=\"postSendCommentImg\"   \n                        />\n                        <div className=\"commentSendArea\">\n                            <input\n                            placeholder=\"......\"\n                            className=\"postSendInput\"\n                            onKeyPress={sendComment}\n                            />\n                        </div>\n                 </div>\n             </div>\n        </div>\n    )\n})\n\nexport default Post","import Share from '../share/Share'\nimport Post from '../post/Post'\nimport './feed.css'\nimport { useState } from 'react'\nimport axios from \"axios\"\nimport InfiniteScroll from 'react-infinite-scroll-component'\nimport { CircularProgress } from '@material-ui/core'\nimport { useEffect } from 'react'\nexport default function Feed({username}) {\n    //proxy\n    //jwt Token\n    //console.log(username)\n    const [hasMore,setHasMore] = useState(true)\n    const [posts,setPosts] = useState([]);\n    const [page,setPage]  = useState(0);\n\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    useEffect(()=>{\n        setPosts([])\n        \n        const fetchPosts = async ()=>{\n            const res = username \n             ? await axios.get(\"/api/posts/profile/\"+ username+\"/\"+page)\n             : await axios.get(\"/api/posts/timeline/all/\"+page)    \n            //console.log(res.data.data)\n            \n            if(res.data.data.length===0){\n                setHasMore(false)\n            }\n            setPosts(res.data.data);\n            setPage(1) \n        };\n        fetchPosts();\n    },[username])\n    const fetchData = async() =>{\n        //inital state\n        if(page===0){\n            console.log(\"test1\")\n        }else{\n            const fetchPosts = async ()=>{\n                setPage(page+1)\n                const res = username \n                ? await axios.get(\"/api/posts/profile/\"+ username+\"/\"+page )\n                : await axios.get(\"/api/posts/timeline/all/\"+page)    \n                //console.log(res.data.data)\n                \n                let data = \"\"\n                //username ? data = res.data.data : data = res.data.data\n                //console.log(res.data.datax)\n                if(res.data.data.length===0){\n                    setHasMore(false)\n                }\n                data = res.data.data\n                data = data.sort((p1,p2)=>{\n                    return new Date(p2.createdAt)-new Date(p1.createdAt);})\n                setPosts(prevPosts=>{\n                    return([...prevPosts,...data])\n                });\n\n                \n            };\n            \n            fetchPosts();\n        }\n    }\n\n\n    return (\n        <div className=\"feed\">\n            <div className=\"feedWrapper\" >\n                {(!username || username ===user.username) && <Share/>}\n                <InfiniteScroll\n                    className=\"feedScrollbar\"\n                    dataLength={posts.length} //This is important field to render the next data\n                    next={fetchData}\n                    hasMore={hasMore}\n                    loader={<div className=\"onLoading\"><CircularProgress  size=\"30px\"/></div>}\n                    endMessage={\n                      <p style={{ textAlign: 'center' }}>\n                        <b>{posts.length===0 ? \"Post!\" :\"\"}</b>\n                      </p>\n                    }                \n                >\n                {posts.map((p)=>(\n                    <Post key={p._id} post={p}/>\n                ))} \n                </InfiniteScroll>\n            </div>\n        </div>\n    )\n}\n","import axios from \"axios\"\nimport { useState } from \"react\"\nimport { useEffect } from \"react\"\nimport { Link } from \"react-router-dom\";\nimport \"./online.css\"\n\nexport default function Online({user}) {\n    const [friend,setFriend] = useState(null);\n    useEffect(()=>{\n        console.log(user)\n        const getUser = async()=>{\n            const res = await axios.get(`/api/users/?userId=${user}`)\n            setFriend(res.data.data)\n        }\n        getUser();\n    },[])\n    return ( \n        <Link to={friend && \"/profile/\"+friend.username} style={{textDecoration:\"none\",color: \"inherit\"}} >\n        <li className=\"rightbarFriend\">\n                    <div className=\"rightbarProfileImgContainer\">\n                        <img src={friend && friend.profilePicture!==\"\"  ? friend.profilePicture :\"https://i.imgur.com/HeIi0wU.png\"}alt=\"\" className=\"rightbarProfileImg\" />\n                        <span className=\"rightbarOnline\"></span>\n                    </div>\n                    <span className=\"rightbarUsername\">{friend? friend.username :\"\" }</span>\n        </li>\n        </Link>\n    )\n}\n","\nimport './rightbar.css'\nimport Online from '../online/Online'\nimport { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Button,CircularProgress} from '@material-ui/core'\nimport { PersonAdd,PersonAddDisabled,RecordVoiceOver} from '@material-ui/icons'\nimport { useRef } from 'react'\nimport {io} from 'socket.io-client'\n\nexport default function Rightbar({user}) {\n    \n    //let history = useHistory()\n    const [friends,setFriends] = useState([])\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"))  \n    //console.log(currentUser)\n    //const {dispatch,user:contextuser} = useContext(AuthContext)\n    //localstorage  \n    const [followed,setFollowed] = useState(currentUser?.friends.includes(user?._id))\n    const [state,setState] = useState(\"\")\n    const [stateIcon,setStateIcon] = useState(\"\")\n    const [onlineUsers,setOnlineUsers] = useState([]);\n    const [isLoading,setIsLoading] = useState(false);\n    const socket = useRef();\n    useEffect(()=>{\n        if(user){\n            // => not friends && no pending \n            //  pending && no friends \n            // pending\n            const checkFriendAndPending = async()=>{\n                const resFriend = await axios.get(\"/api/users/friends/\"+user._id)\n                const resPending = await axios.get(\"/api/users/pending/\"+user._id)\n                const userFriends = resFriend.data.data\n                const isFriend = userFriends.find(friend=>{\n                   return friend._id === currentUser._id\n                })\n                if(!isFriend && resPending.data.data===null ){\n                    setState(\"\")\n                    setStateIcon(<PersonAdd/>)\n                }\n                if(isFriend){\n                    setState(\"\")\n                    setStateIcon(<PersonAddDisabled/>)\n                }\n                if(!isFriend && resPending.data.data!==null){\n                    setState(\"\")\n                    setStateIcon(<RecordVoiceOver/>)\n                }\n            }\n            checkFriendAndPending()\n        }\n    },[user?._id])\n    useEffect(()=>{\n        socket.current = io(process.env.REACT_APP_SOCKET_PORT) //andqport \n        socket.current.emit(\"addUser\",currentUser._id)\n        socket.current.on(\"getUsers\",users=>{\n            setOnlineUsers(\n                currentUser.friends.filter((f)=> users.some((u)=>u.userId===f))\n            );\n        })\n    },[])\n    useEffect(()=>{\n       setFollowed(currentUser.friends.includes(user?._id))\n    },[currentUser,user?._id])\n    useEffect(()=>{\n        //console.log(user?._id)\n        if(user){\n            const getFriends = async()=>{\n                try{\n                    if(user?._id){\n                        const friendList = await axios.get('/api/users/friends/'+ user?._id)\n                        setFriends(friendList.data.data)\n                    }\n                }catch(err){\n                    console.log(err)\n                }\n            };\n            getFriends();\n        }\n    },[user?._id])\n\n\n    const handleClick = async()=>{\n        try{\n            if(followed){\n                setIsLoading(true)\n                await axios.put(\"api/users/unfriend/\"+user._id,null);\n                currentUser.friends = currentUser.friends.filter(friend=>friend!==user._id) \n                console.log(currentUser)\n                localStorage.setItem(\"user\",JSON.stringify(currentUser))\n            }else{\n                setIsLoading(true)\n                // pending\n                const sendPending = async()=>{\n                    await axios.post('/api/users/pending/'+user._id)\n                }\n                const  sendNotice = async ()=>{\n                    const notice = {\n                        senderId : currentUser._id,\n                        object : \"friendRequest\",\n                        senderPic : currentUser.profilePicture,\n                        senderUsername : currentUser.username,\n                        receiverId: user._id\n                    }\n                    await axios.post('/api/notice',notice)\n                    window.location.reload()\n                }\n                await sendPending()\n                await sendNotice()\n                // await axios.put(\"api/users/friend/\"+user._id,null)\n                // currentUser.friends = [...currentUser.friends,user._id]\n                // console.log(currentUser)\n                // localStorage.setItem(\"user\",JSON.stringify(currentUser))\n            }\n        }catch(err){\n            console.log(err)\n        }\n        setIsLoading(false)\n        setFollowed(!followed)\n    } \n\n    const HomeRightbar = ()=>{\n        return(\n            <>\n                <div className=\"birthdayContainer\">\n                    <img className=\"birthdayImg\" src=\"assets/gift3.png\" alt=\"\" />\n                    <span className=\"birthdayText\">\n                        <b></b> and <b></b>\n                    </span>\n                </div>\n                <img src=\"assets/add.jpg\" alt=\"\" className=\"rightbarAd\" />\n                <h4 className=\"rightbarTitle\"></h4>\n                <ul className=\"rightbarFirendList\">\n                    {onlineUsers.map(u=>(\n                        <Online key={u} user={u}/>\n                    ))}\n                </ul>    \n            </>\n        )\n    }\n    const ProfileRightbar = () =>{\n        return(\n            <>\n                {/*  */}\n                {user.username !== currentUser.username &&(\n                    <Button \n                        onClick={handleClick} \n                        startIcon={isLoading? \"\" : stateIcon}\n                        style={{marginBottom:\"10px\",marginTop:\"30px\",fontSize:\"16px\",backgroundColor:\"#007355\",color:\"white\",alignItems:\"center\",padding:\"8px 12px\"}}\n                        disabled={isLoading || state===\"\"}\n                    >\n                        {isLoading \n                                ?  <CircularProgress color=\"white\" size=\"20px\"/>\n                                : state\n                        }\n                    </Button>\n\n                )}\n                <h4 className=\"rightbarTitle\"></h4>\n                <div className=\"rightbarInfo\">\n                    <div className=\"rightbarInfoItem\">\n                        <span className=\"rightbarInfoKey\">:</span>\n                        <span className=\"rightbarInfoValue\">{user.city}</span>\n                    </div>\n                    <div className=\"rightbarInfoItem\">\n                        <span className=\"rightbarInfoKey\">:</span>\n                        <span className=\"rightbarInfoValue\">{user.from}</span>\n                    </div>\n                    <div className=\"rightbarInfoItem\">\n                        <span className=\"rightbarInfoKey\">:</span>\n                        <span className=\"rightbarInfoValue\">{user.relationship===1? \"\" : user.relationship===2 ? \"\":\"-\"}</span>\n                    </div>\n                </div>\n                <h4 className=\"rightbarTitle\"></h4>\n                <div className=\"rightbarFollowings\">\n                    {friends.map((friend)=>(\n                    //Refresh\n                    <div onClick={() => {window.location.href=\"/profile/\"+friend.username}} key={friend._id}>\n                    {/* <Link to={\"/profile/\"+friend.username} style={{textDecoration:\"none\"}} key={friend.username}  > */}\n                    <div className=\"rightbarFollowing\">\n                        <img \n                            src={\n                            friend.profilePicture \n                            ? friend.profilePicture \n                            : \"https://i.imgur.com/HeIi0wU.png\"} \n                            alt=\"\" \n                            className=\"rightbarFollowingImg\" \n                        />\n                        <span className=\"rightbarFollowingName\">\b{friend.username}</span>\n                    </div>\n                    {/* </Link> */}\n                    </div>\n                    ))}\n\n                </div>\n            </>\n        )\n    }\n    return (\n        <div className=\"rightbar\">\n            <div className=\"rightbarWrapper\">\n                {user ? <ProfileRightbar/> : <HomeRightbar/> }  \n            </div>\n        </div>\n    )\n}\n","import Topbar from \"../../components/topbar/Topbar\"\nimport Sidebar from \"../../components/sidebar/Sidebar\"\nimport Feed from \"../../components/feed/Feed\"\nimport Rightbar from \"../../components/rightbar/Rightbar\"\nimport './home.css'\nexport default function Home(){\n    return(\n        <>\n        <Topbar/>\n        <div className=\"homeContainer\">\n            <Sidebar/>\n            <Feed/>\n            <Rightbar/> \n        </div>\n        \n        </>\n    )\n}","\nimport axios from 'axios'\nimport { decodeToken } from 'react-jwt';\nimport jwt_decode from \"jwt-decode\";\nexport const LoginCall = async (userCredential,dispatch)=>{\n    dispatch({type:\"LOGIN_START\"});\n    try{\n        console.log(userCredential)\n        const res = await axios.post(\"auth/local/signin\",userCredential)\n        console.log(res.data.data)\n        // axios.defaults.headers.common['Authorization'] = 'Bearer '+res.data.data;\n        //Tokenfetch user data\n        axios.interceptors.request.use(function (config) {\n            config.headers.Authorization = \"Bearer \"+res.data.data  ;\n            return config;\n        });\n        const user = jwt_decode(res.data.data)\n        console.log(res.data.data)\n        console.log(user)\n        const user_data  = await axios.get(`/api/users?userId=${user._id}`)\n        console.log(res.data.data)\n        localStorage.setItem('token',res.data.data)\n        localStorage.setItem('user',JSON.stringify(user_data.data.data)) \n        dispatch({type:\"LOGIN_SUCCESS\",payload:user_data.data.data});\n        window.location.href='/register'\n    }catch(e){\n        if (e) {\n            console.log(e) // some reason error message\n          }\n        dispatch({type:\"LOGIN_FAILURE\",payload:e});\n    }\n}","const AuthReducer  = (state,action) =>{\n    switch(action.type){\n        case \"LOGIN_START\":\n            return{\n                user:null,\n                isFetching:true,\n                error: false,\n            };\n        case \"LOGIN_SUCCESS\":\n            return{\n\n                user:action.payload,\n                isFetching:false,\n                error: false,\n            };\n        case \"LOGIN_FAILURE\":\n            return{\n                user:null,\n                isFetching:false,\n                error: action.payload,\n            };\n        case \"FOLLOW\":\n            return{\n                ...state,\n                user:{\n                    ...state.user,\n                    followings:[...state.user.followings,action.payload]\n                }\n            }\n        case \"UNFOLLOW\":\n            console.log(state.user.followings)\n            return{\n                ...state,\n                user:{\n                    ...state.user,\n                    followings:state.user.followings.filter(\n                        following=>following!==action.payload\n                    ),\n                },\n            }\n        default:\n            return state\n    }\n};\n\nexport default AuthReducer","import { createContext, useReducer } from \"react\";\nimport AuthReducer from \"./AuthReducer\";\n\nconst INITIAL_STATE = {\n    // user: {\n    //     \"profilePicture\": \"person/3.jpg\",\n    //     \"coverPicture\": \"post/2.jpg\",\n    //     \"followers\": [\n    //         \"60ebc66deb725c5783ef46a1\",\n    //         \"60ecde5f688a206c94cd60bb\"\n    //     ],\n    //     \"followings\": [\n    //     ],\n    //     \"isAdmin\": false,\n    //     \"_id\": \"60ebc2404a6ed456750998b1\",\n    //     \"followins\": [\n    //         \"60ebc2584a6ed456750998b4\"\n    //     ],\n    //     \"username\": \"john\",\n    //     \"email\": \"newtest04@gmail.com\",\n    //     \"createdAt\": \"2021-07-12T04:17:04.555Z\",\n    //     \"updatedAt\": \"2021-07-15T11:00:25.232Z\",\n    //     \"__v\": 0,\n    //     \"city\": \"\",\n    //     \"desc\": \"\",\n    //     \"from\": \"\",\n    //     \"relationship\": 2 \n    // },\n    user:null,\n    isFetching: false,\n    error: false\n\n};\n\n\nexport const AuthContext = createContext(INITIAL_STATE);\n\nexport const AuthContextProvider = ({children}) => {\n    const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n\n    return (\n        <AuthContext.Provider \n            value={{ \n                user: state.user, \n                isFetching: state.isFetching, \n                error: state.error,\n                dispatch\n        }}\n        >\n            {children}\n        </AuthContext.Provider>\n    )\n}","import \"./login.css\"\nimport { useContext,useRef } from \"react\"\nimport { LoginCall } from \"../../apiCalls\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { CircularProgress} from \"@material-ui/core\"\nimport { Link } from \"react-router-dom\";\nexport default function Login() {\n    //useState\n    const email = useRef();\n    const password = useRef();\n    const {user,isFetching,error,dispatch} = useContext(AuthContext);\n    const handleClick =(e) => {\n        e.preventDefault();\n        LoginCall(\n            {username:email.current.value ,password: password.current.value},\n            dispatch\n        );\n    }\n    console.log(user)\n    console.log(error)\n    return (\n        <div className=\"login\">\n            <div className=\"loginWrapper\">\n                <div className=\"loginLeft\">\n                    <h3 className=\"loginLogo\">HardCo.Social</h3>\n                    <span className=\"loginDesc\">\n                        HardCo.Social.\n                    </span>\n                </div>\n                <div className=\"loginRight\">\n                    <div className=\"loginBox\">\n                    <form className=\"loginBox\" onSubmit={handleClick}>\n                        <input \n                            placeholder=\"\" \n                             className=\"loginInput\"\n                             required \n                             ref={email}/>\n                        <input \n                            placeholder=\"\" \n                            type=\"password\" \n                            className=\"loginInput\" \n                            required\n                            minLength = \"8\"\n                            ref={password}/>\n                        {/*  */}\n                        {error? <span>{error.response.data.message}</span> : null}\n                        <button className=\"loginButton\">\n                            {isFetching ? <CircularProgress color=\"white\" size=\"20px\"/>:\"\"}\n                        </button>          \n                    </form>\n                    <span className=\"loginForgot\"></span>  \n                    <Link className=\"loginRegisterLink\" to=\"/register\">\n                    <button className=\"loginRegisterButton\">\n                        {isFetching ? <CircularProgress color=\"white\" size=\"20px\"/>:\"\"}\n                    </button>\n                    </Link>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","export const  Users = [\n    {\n        id:1,\n        profilePicture:\"person/1.jpg\",\n        username:\"\",\n    },\n    {\n        id:2,\n        profilePicture:\"person/2.jpg\",\n        username:\"\",\n    },\n    {\n        id:3,\n        profilePicture:\"person/3.jpg\",\n        username:\"\",\n    },\n    {\n        id:4,\n        profilePicture:\"person/4.jpg\",\n        username:\"\",\n    },\n    {\n        id:5,\n        profilePicture:\"person/5.jpg\",\n        username:\"\",\n    },\n    {\n        id:7,\n        profilePicture:\"person/7.jpg\",\n        username:\"\",\n    },\n    {\n        id:8,\n        profilePicture:\"person/8.jpg\",\n        username:\"\",\n    },\n    {\n        id:9,\n        profilePicture:\"person/9.jpg\",\n        username:\"\",\n    },\n    {\n        id:10,\n        profilePicture:\"person/10.jpg\",\n        username:\"\",\n    },\n];\n\nexport const Posts = [\n    {\n        id:1,\n        desc:\"\",\n        photo:\"post/1.webp\",\n        date:\"5 mins ago\",\n        userId:1,\n        like:32,\n        comment:9,\n    },\n    {\n        id:2,\n        desc:\"\",\n        photo:\"post/2.jpg\",\n        date:\"15 mins ago\",\n        userId:2,\n        like:2,\n        comment:1,\n    },\n    {\n        id:3,\n        desc:\"\",\n        photo:\"post/3.jpg\",\n        date:\"20 mins ago\",\n        userId:3,\n        like:100,\n        comment:15,\n    },\n    {\n        id:4,\n        desc:\"\",\n        photo:\"post/4.jpg\",\n        date:\"5 mins ago\",\n        userId:4,\n        like:10,\n        comment:5,\n    },\n    {\n        id:5,\n        desc:\"\",\n        photo:\"post/5.jpg\",\n        date:\"5 mins ago\",\n        userId:5,\n        like:30,\n        comment:8,\n    },\n];\n\nexport const  Countries =  [  \n    {\"code\": \"HK\", \"en\": \"Hong Kong\", \"cn\": \"\"},  \n    {\"code\": \"TW\", \"en\": \"Taiwan\", \"cn\": \"\"},  \n    {\"code\": \"MO\", \"en\": \"Macao\", \"cn\": \"\"},  \n    {\"code\": \"US\", \"en\": \"United States of America (USA)\", \"cn\": \"\"},  \n    {\"code\": \"AR\", \"en\": \"Argentina\", \"cn\": \"\"},  \n    {\"code\": \"AD\", \"en\": \"Andorra\", \"cn\": \"\"},  \n    {\"code\": \"AE\", \"en\": \"United Arab Emirates\", \"cn\": \"\"},  \n    {\"code\": \"AF\", \"en\": \"Afghanistan\", \"cn\": \"\"},  \n    {\"code\": \"AG\", \"en\": \"Antigua & Barbuda\", \"cn\": \"\"},  \n    {\"code\": \"AI\", \"en\": \"Anguilla\", \"cn\": \"\"},  \n    {\"code\": \"AL\", \"en\": \"Albania\", \"cn\": \"\"},  \n    {\"code\": \"AM\", \"en\": \"Armenia\", \"cn\": \"\"},  \n    {\"code\": \"AO\", \"en\": \"Angola\", \"cn\": \"\"},  \n    {\"code\": \"AQ\", \"en\": \"Antarctica\", \"cn\": \"\"},  \n    {\"code\": \"AS\", \"en\": \"American Samoa\", \"cn\": \"\"},  \n    {\"code\": \"AT\", \"en\": \"Austria\", \"cn\": \"\"},  \n    {\"code\": \"AU\", \"en\": \"Australia\", \"cn\": \"\"},  \n    {\"code\": \"AW\", \"en\": \"Aruba\", \"cn\": \"\"},  \n    {\"code\": \"AX\", \"en\": \"Aland Island\", \"cn\": \"\"},  \n    {\"code\": \"AZ\", \"en\": \"Azerbaijan\", \"cn\": \"\"},  \n    {\"code\": \"BA\", \"en\": \"Bosnia & Herzegovina\", \"cn\": \"\"},  \n    {\"code\": \"BB\", \"en\": \"Barbados\", \"cn\": \"\"},  \n    {\"code\": \"BD\", \"en\": \"Bangladesh\", \"cn\": \"\"},  \n    {\"code\": \"BE\", \"en\": \"Belgium\", \"cn\": \"\"},  \n    {\"code\": \"BF\", \"en\": \"Burkina\", \"cn\": \"\"},  \n    {\"code\": \"BG\", \"en\": \"Bulgaria\", \"cn\": \"\"},  \n    {\"code\": \"BH\", \"en\": \"Bahrain\", \"cn\": \"\"},  \n    {\"code\": \"BI\", \"en\": \"Burundi\", \"cn\": \"\"},  \n    {\"code\": \"BJ\", \"en\": \"Benin\", \"cn\": \"\"},  \n    {\"code\": \"BL\", \"en\": \"Saint Barthlemy\", \"cn\": \"\"},  \n    {\"code\": \"BM\", \"en\": \"Bermuda\", \"cn\": \"\"},  \n    {\"code\": \"BN\", \"en\": \"Brunei\", \"cn\": \"\"},  \n    {\"code\": \"BO\", \"en\": \"Bolivia\", \"cn\": \"\"},  \n    {\"code\": \"BQ\", \"en\": \"Caribbean Netherlands\", \"cn\": \"\"},  \n    {\"code\": \"BR\", \"en\": \"Brazil\", \"cn\": \"\"},  \n    {\"code\": \"BS\", \"en\": \"The Bahamas\", \"cn\": \"\"},  \n    {\"code\": \"BT\", \"en\": \"Bhutan\", \"cn\": \"\"},  \n    {\"code\": \"BV\", \"en\": \"Bouvet Island\", \"cn\": \"\"},  \n    {\"code\": \"BW\", \"en\": \"Botswana\", \"cn\": \"\"},  \n    {\"code\": \"BY\", \"en\": \"Belarus\", \"cn\": \"\"},  \n    {\"code\": \"BZ\", \"en\": \"Belize\", \"cn\": \"\"},  \n    {\"code\": \"CA\", \"en\": \"Canada\", \"cn\": \"\"},  \n    {\"code\": \"CC\", \"en\": \"Cocos (Keeling) Islands\", \"cn\": \"\"},  \n    {\"code\": \"CD\", \"en\": \"Democratic Republic of the Congo\", \"cn\": \"\"},  \n    {\"code\": \"CF\", \"en\": \"Central African Republic\", \"cn\": \"\"},  \n    {\"code\": \"CG\", \"en\": \"Republic of the Congo\", \"cn\": \"\"},  \n    {\"code\": \"CH\", \"en\": \"Switzerland\", \"cn\": \"\"},  \n    {\"code\": \"CI\", \"en\": \"Cote d'Ivoire\", \"cn\": \"\"},  \n    {\"code\": \"CK\", \"en\": \"Cook Islands\", \"cn\": \"\"},  \n    {\"code\": \"CL\", \"en\": \"Chile\", \"cn\": \"\"},  \n    {\"code\": \"CM\", \"en\": \"Cameroon\", \"cn\": \"\"},  \n    {\"code\": \"CN\", \"en\": \"China\", \"cn\": \"\"},  \n    {\"code\": \"CO\", \"en\": \"Colombia\", \"cn\": \"\"},  \n    {\"code\": \"CR\", \"en\": \"Costa Rica\", \"cn\": \"\"},  \n    {\"code\": \"CU\", \"en\": \"Cuba\", \"cn\": \"\"},  \n    {\"code\": \"CV\", \"en\": \"Cape Verde\", \"cn\": \"\"},  \n    {\"code\": \"CW\", \"en\": \"Curacao\", \"cn\": \"\"},  \n    {\"code\": \"CX\", \"en\": \"Christmas Island\", \"cn\": \"\"},  \n    {\"code\": \"CY\", \"en\": \"Cyprus\", \"cn\": \"\"},  \n    {\"code\": \"CZ\", \"en\": \"Czech Republic\", \"cn\": \"\"},  \n    {\"code\": \"DE\", \"en\": \"Germany\", \"cn\": \"\"},  \n    {\"code\": \"DJ\", \"en\": \"Djibouti\", \"cn\": \"\"},  \n    {\"code\": \"DK\", \"en\": \"Denmark\", \"cn\": \"\"},  \n    {\"code\": \"DM\", \"en\": \"Dominica\", \"cn\": \"\"},  \n    {\"code\": \"DO\", \"en\": \"Dominican Republic\", \"cn\": \"\"},  \n    {\"code\": \"DZ\", \"en\": \"Algeria\", \"cn\": \"\"},  \n    {\"code\": \"EC\", \"en\": \"Ecuador\", \"cn\": \"\"},  \n    {\"code\": \"EE\", \"en\": \"Estonia\", \"cn\": \"\"},  \n    {\"code\": \"EG\", \"en\": \"Egypt\", \"cn\": \"\"},  \n    {\"code\": \"EH\", \"en\": \"Western Sahara\", \"cn\": \"\"},  \n    {\"code\": \"ER\", \"en\": \"Eritrea\", \"cn\": \"\"},  \n    {\"code\": \"ES\", \"en\": \"Spain\", \"cn\": \"\"},  \n    {\"code\": \"ET\", \"en\": \"Ethiopia\", \"cn\": \"\"},  \n    {\"code\": \"FI\", \"en\": \"Finland\", \"cn\": \"\"},  \n    {\"code\": \"FJ\", \"en\": \"Fiji\", \"cn\": \"\"},\n    {\"code\": \"FK\", \"en\": \"Falkland Islands\", \"cn\": \"\" },  \n    {\"code\": \"FM\", \"en\": \"Federated States of Micronesia\", \"cn\": \"\"},  \n    {\"code\": \"FO\", \"en\": \"Faroe Islands\", \"cn\": \"\"},  \n    {\"code\": \"FR\", \"en\": \"France\", \"cn\": \" \"},  \n    {\"code\": \"GA\", \"en\": \"Gabon\", \"cn\": \"\"},  \n    {\"code\": \"GB\", \"en\": \"Great Britain (United Kingdom; England)\", \"cn\": \"\"},  \n    {\"code\": \"GD\", \"en\": \"Grenada\", \"cn\": \"\"},  \n    {\"code\": \"GE\", \"en\": \"Georgia\", \"cn\": \"\"},  \n    {\"code\": \"GF\", \"en\": \"French Guiana\", \"cn\": \"\"},  \n    {\"code\": \"GG\", \"en\": \"Guernsey\", \"cn\": \"\"},  \n    {\"code\": \"GH\", \"en\": \"Ghana\", \"cn\": \"\"},  \n    {\"code\": \"GI\", \"en\": \"Gibraltar\", \"cn\": \"\"},  \n    {\"code\": \"GL\", \"en\": \"Greenland\", \"cn\": \"\"},  \n    {\"code\": \"GM\", \"en\": \"Gambia\", \"cn\": \"\"},  \n    {\"code\": \"GN\", \"en\": \"Guinea\", \"cn\": \"\"},  \n    {\"code\": \"GP\", \"en\": \"Guadeloupe\", \"cn\": \"\"},  \n    {\"code\": \"GQ\", \"en\": \"Equatorial Guinea\", \"cn\": \"\"},  \n    {\"code\": \"GR\", \"en\": \"Greece\", \"cn\": \"\"},  \n    {\"code\": \"GS\", \"en\": \"South Georgia and the South Sandwich Islands\", \"cn\": \"\"},  \n    {\"code\": \"GT\", \"en\": \"Guatemala\", \"cn\": \"\"},  \n    {\"code\": \"GU\", \"en\": \"Guam\", \"cn\": \"\"},  \n    {\"code\": \"GW\", \"en\": \"Guinea-Bissau\", \"cn\": \"\"},  \n    {\"code\": \"GY\", \"en\": \"Guyana\", \"cn\": \"\"},  \n    {\"code\": \"HM\", \"en\": \"Heard Island and McDonald Islands\", \"cn\": \"\"},  \n    {\"code\": \"HN\", \"en\": \"Honduras\", \"cn\": \"\"},  \n    {\"code\": \"HR\", \"en\": \"Croatia\", \"cn\": \"\"},  \n    {\"code\": \"HT\", \"en\": \"Haiti\", \"cn\": \"\"},  \n    {\"code\": \"HU\", \"en\": \"Hungary\", \"cn\": \"\"},  \n    {\"code\": \"ID\", \"en\": \"Indonesia\", \"cn\": \"\"},  \n    {\"code\": \"IE\", \"en\": \"Ireland\", \"cn\": \"\"},  \n    {\"code\": \"IL\", \"en\": \"Israel\", \"cn\": \"\"},  \n    {\"code\": \"IM\", \"en\": \"Isle of Man\", \"cn\": \"\"},  \n    {\"code\": \"IN\", \"en\": \"India\", \"cn\": \"\"},  \n    {\"code\": \"IO\", \"en\": \"British Indian Ocean Territory\", \"cn\": \"\"},  \n    {\"code\": \"IQ\", \"en\": \"Iraq\", \"cn\": \"\"},  \n    {\"code\": \"IR\", \"en\": \"Iran\", \"cn\": \"\"},  \n    {\"code\": \"IS\", \"en\": \"Iceland\", \"cn\": \"\"},  \n    {\"code\": \"IT\", \"en\": \"Italy\", \"cn\": \"\"},  \n    {\"code\": \"JE\", \"en\": \"Jersey\", \"cn\": \"\"},  \n    {\"code\": \"JM\", \"en\": \"Jamaica\", \"cn\": \"\"},  \n    {\"code\": \"JO\", \"en\": \"Jordan\", \"cn\": \"\"},  \n    {\"code\": \"JP\", \"en\": \"Japan\", \"cn\": \"\"},  \n    {\"code\": \"KE\", \"en\": \"Kenya\", \"cn\": \"\"},  \n    {\"code\": \"KG\", \"en\": \"Kyrgyzstan\", \"cn\": \"\"},  \n    {\"code\": \"KH\", \"en\": \"Cambodia\", \"cn\": \"\"},  \n    {\"code\": \"KI\", \"en\": \"Kiribati\", \"cn\": \"\"},  \n    {\"code\": \"KM\", \"en\": \"The Comoros\", \"cn\": \"\"},  \n    {\"code\": \"KN\", \"en\": \"St. Kitts & Nevis\", \"cn\": \"\"},  \n    {\"code\": \"KP\", \"en\": \"North Korea\", \"cn\": \"\"},  \n    {\"code\": \"KR\", \"en\": \"South Korea\", \"cn\": \"\"},  \n    {\"code\": \"KW\", \"en\": \"Kuwait\", \"cn\": \"\"},  \n    {\"code\": \"KY\", \"en\": \"Cayman Islands\", \"cn\": \"\"},  \n    {\"code\": \"KZ\", \"en\": \"Kazakhstan\", \"cn\": \"\"},  \n    {\"code\": \"LA\", \"en\": \"Laos\", \"cn\": \"\"},  \n    {\"code\": \"LB\", \"en\": \"Lebanon\", \"cn\": \"\"},  \n    {\"code\": \"LC\", \"en\": \"St. Lucia\", \"cn\": \"\"},  \n    {\"code\": \"LI\", \"en\": \"Liechtenstein\", \"cn\": \"\"},  \n    {\"code\": \"LK\", \"en\": \"Sri Lanka\", \"cn\": \"\"},  \n    {\"code\": \"LR\", \"en\": \"Liberia\", \"cn\": \"\"},  \n    {\"code\": \"LS\", \"en\": \"Lesotho\", \"cn\": \"\"},  \n    {\"code\": \"LT\", \"en\": \"Lithuania\", \"cn\": \"\"},  \n    {\"code\": \"LU\", \"en\": \"Luxembourg\", \"cn\": \"\"},  \n    {\"code\": \"LV\", \"en\": \"Latvia\", \"cn\": \"\"},  \n    {\"code\": \"LY\", \"en\": \"Libya\", \"cn\": \"\"},  \n    {\"code\": \"MA\", \"en\": \"Morocco\", \"cn\": \"\"},  \n    {\"code\": \"MC\", \"en\": \"Monaco\", \"cn\": \"\"},  \n    {\"code\": \"MD\", \"en\": \"Moldova\", \"cn\": \"\"},  \n    {\"code\": \"ME\", \"en\": \"Montenegro\", \"cn\": \"\"},  \n    {\"code\": \"MF\", \"en\": \"Saint Martin (France)\", \"cn\": \"\"},  \n    {\"code\": \"MG\", \"en\": \"Madagascar\", \"cn\": \"\"},  \n    {\"code\": \"MH\", \"en\": \"Marshall islands\", \"cn\": \"\"},  \n    {\"code\": \"MK\", \"en\": \"Republic of Macedonia (FYROM)\", \"cn\": \"\"},  \n    {\"code\": \"ML\", \"en\": \"Mali\", \"cn\": \"\"},  \n    {\"code\": \"MM\", \"en\": \"Myanmar (Burma)\", \"cn\": \"\"},  \n    {\"code\": \"MN\", \"en\": \"Mongolia\", \"cn\": \"\"},  \n    {\"code\": \"MP\", \"en\": \"Northern Mariana Islands\", \"cn\": \"\"},  \n    {\"code\": \"MQ\", \"en\": \"Martinique\", \"cn\": \"\"},  \n    {\"code\": \"MR\", \"en\": \"Mauritania\", \"cn\": \"\"},  \n    {\"code\": \"MS\", \"en\": \"Montserrat\", \"cn\": \"\"},  \n    {\"code\": \"MT\", \"en\": \"Malta\", \"cn\": \"\"},  \n    {\"code\": \"MU\", \"en\": \"Mauritius\", \"cn\": \"\"},  \n    {\"code\": \"MV\", \"en\": \"Maldives\", \"cn\": \"\"},  \n    {\"code\": \"MW\", \"en\": \"Malawi\", \"cn\": \"\"},  \n    {\"code\": \"MX\", \"en\": \"Mexico\", \"cn\": \"\"},  \n    {\"code\": \"MY\", \"en\": \"Malaysia\", \"cn\": \"\"},  \n    {\"code\": \"MZ\", \"en\": \"Mozambique\", \"cn\": \"\"},  \n    {\"code\": \"NA\", \"en\": \"Namibia\", \"cn\": \"\"},  \n    {\"code\": \"NC\", \"en\": \"New Caledonia\", \"cn\": \"\"},  \n    {\"code\": \"NE\", \"en\": \"Niger\", \"cn\": \"\"},  \n    {\"code\": \"NF\", \"en\": \"Norfolk Island\", \"cn\": \"\"},  \n    {\"code\": \"NG\", \"en\": \"Nigeria\", \"cn\": \"\"},  \n    {\"code\": \"NI\", \"en\": \"Nicaragua\", \"cn\": \"\"},  \n    {\"code\": \"NL\", \"en\": \"Netherlands\", \"cn\": \"\"},  \n    {\"code\": \"NO\", \"en\": \"Norway\", \"cn\": \"\"},  \n    {\"code\": \"NP\", \"en\": \"Nepal\", \"cn\": \"\"},  \n    {\"code\": \"NR\", \"en\": \"Nauru\", \"cn\": \"\"},  \n    {\"code\": \"NU\", \"en\": \"Niue\", \"cn\": \"\"},  \n    {\"code\": \"NZ\", \"en\": \"New Zealand\", \"cn\": \"\"},  \n    {\"code\": \"OM\", \"en\": \"Oman\", \"cn\": \"\"},  \n    {\"code\": \"PA\", \"en\": \"Panama\", \"cn\": \"\"},  \n    {\"code\": \"PE\", \"en\": \"Peru\", \"cn\": \"\"},  \n    {\"code\": \"PF\", \"en\": \"French polynesia\", \"cn\": \"\"},  \n    {\"code\": \"PG\", \"en\": \"Papua New Guinea\", \"cn\": \"\"},  \n    {\"code\": \"PH\", \"en\": \"The Philippines\", \"cn\": \"\"},  \n    {\"code\": \"PK\", \"en\": \"Pakistan\", \"cn\": \"\"},  \n    {\"code\": \"PL\", \"en\": \"Poland\", \"cn\": \"\"},  \n    {\"code\": \"PM\", \"en\": \"Saint-Pierre and Miquelon\", \"cn\": \"\"},  \n    {\"code\": \"PN\", \"en\": \"Pitcairn Islands\", \"cn\": \"\"},  \n    {\"code\": \"PR\", \"en\": \"Puerto Rico\", \"cn\": \"\"},  \n    {\"code\": \"PS\", \"en\": \"Palestinian territories\", \"cn\": \"\"},  \n    {\"code\": \"PT\", \"en\": \"Portugal\", \"cn\": \"\"},  \n    {\"code\": \"PW\", \"en\": \"Palau\", \"cn\": \"\"},  \n    {\"code\": \"PY\", \"en\": \"Paraguay\", \"cn\": \"\"},  \n    {\"code\": \"QA\", \"en\": \"Qatar\", \"cn\": \"\"},  \n    {\"code\": \"RE\", \"en\": \"Runion\", \"cn\": \"\"},  \n    {\"code\": \"RO\", \"en\": \"Romania\", \"cn\": \"\"},  \n    {\"code\": \"RS\", \"en\": \"Serbia\", \"cn\": \"\"},  \n    {\"code\": \"RU\", \"en\": \"Russian Federation\", \"cn\": \"\"},  \n    {\"code\": \"RW\", \"en\": \"Rwanda\", \"cn\": \"\"},  \n    {\"code\": \"SA\", \"en\": \"Saudi Arabia\", \"cn\": \"\"},  \n    {\"code\": \"SB\", \"en\": \"Solomon Islands\", \"cn\": \"\"},  \n    {\"code\": \"SC\", \"en\": \"Seychelles\", \"cn\": \"\"},  \n    {\"code\": \"SD\", \"en\": \"Sudan\", \"cn\": \"\"},  \n    {\"code\": \"SE\", \"en\": \"Sweden\", \"cn\": \"\"},  \n    {\"code\": \"SG\", \"en\": \"Singapore\", \"cn\": \"\"},  \n    {\"code\": \"SH\", \"en\": \"St. Helena & Dependencies\", \"cn\": \"\"},  \n    {\"code\": \"SI\", \"en\": \"Slovenia\", \"cn\": \"\"},  \n    {\"code\": \"SJ\", \"en\": \"Svalbard and Jan Mayen\", \"cn\": \"\"},  \n    {\"code\": \"SK\", \"en\": \"Slovakia\", \"cn\": \"\"},  \n    {\"code\": \"SL\", \"en\": \"Sierra Leone\", \"cn\": \"\"},  \n    {\"code\": \"SM\", \"en\": \"San Marino\", \"cn\": \"\"},  \n    {\"code\": \"SN\", \"en\": \"Senegal\", \"cn\": \"\"},  \n    {\"code\": \"SO\", \"en\": \"Somalia\", \"cn\": \"\"},  \n    {\"code\": \"SR\", \"en\": \"Suriname\", \"cn\": \"\"},  \n    {\"code\": \"SS\", \"en\": \"South Sudan\", \"cn\": \"\"},  \n    {\"code\": \"ST\", \"en\": \"Sao Tome & Principe\", \"cn\": \"\"},  \n    {\"code\": \"SV\", \"en\": \"El Salvador\", \"cn\": \"\"},  \n    {\"code\": \"SX\", \"en\": \"Sint Maarten\", \"cn\": \"\"},  \n    {\"code\": \"SY\", \"en\": \"Syria\", \"cn\": \"\"},  \n    {\"code\": \"SZ\", \"en\": \"Swaziland\", \"cn\": \"\"},  \n    {\"code\": \"TC\", \"en\": \"Turks & Caicos Islands\", \"cn\": \"\"},  \n    {\"code\": \"TD\", \"en\": \"Chad\", \"cn\": \"\"},  \n    {\"code\": \"TF\", \"en\": \"French Southern Territories\", \"cn\": \"\"},  \n    {\"code\": \"TG\", \"en\": \"Togo\", \"cn\": \"\"},  \n    {\"code\": \"TH\", \"en\": \"Thailand\", \"cn\": \"\"},  \n    {\"code\": \"TJ\", \"en\": \"Tajikistan\", \"cn\": \"\"},  \n    {\"code\": \"TK\", \"en\": \"Tokelau\", \"cn\": \"\"},  \n    {\"code\": \"TL\", \"en\": \"Timor-Leste (East Timor)\", \"cn\": \"\"},  \n    {\"code\": \"TM\", \"en\": \"Turkmenistan\", \"cn\": \"\"},  \n    {\"code\": \"TN\", \"en\": \"Tunisia\", \"cn\": \"\"},  \n    {\"code\": \"TO\", \"en\": \"Tonga\", \"cn\": \"\"},  \n    {\"code\": \"TR\", \"en\": \"Turkey\", \"cn\": \"\"},  \n    {\"code\": \"TT\", \"en\": \"Trinidad & Tobago\", \"cn\": \"\"},  \n    {\"code\": \"TV\", \"en\": \"Tuvalu\", \"cn\": \"\"},  \n    {\"code\": \"TZ\", \"en\": \"Tanzania\", \"cn\": \"\"},  \n    {\"code\": \"UA\", \"en\": \"Ukraine\", \"cn\": \"\"},  \n    {\"code\": \"UG\", \"en\": \"Uganda\", \"cn\": \"\"},  \n    {\"code\": \"UM\", \"en\": \"United States Minor Outlying Islands\", \"cn\": \"\"},  \n    {\"code\": \"UY\", \"en\": \"Uruguay\", \"cn\": \"\"},  \n    {\"code\": \"UZ\", \"en\": \"Uzbekistan\", \"cn\": \"\"},  \n    {\"code\": \"VA\", \"en\": \"Vatican City (The Holy See)\", \"cn\": \"\"},  \n    {\"code\": \"VC\", \"en\": \"St. Vincent & the Grenadines\", \"cn\": \"\"},  \n    {\"code\": \"VE\", \"en\": \"Venezuela\", \"cn\": \"\"},  \n    {\"code\": \"VG\", \"en\": \"British Virgin Islands\", \"cn\": \"\"},  \n    {\"code\": \"VI\", \"en\": \"United States Virgin Islands\", \"cn\": \"\"},  \n    {\"code\": \"VN\", \"en\": \"Vietnam\", \"cn\": \"\"},  \n    {\"code\": \"VU\", \"en\": \"Vanuatu\", \"cn\": \"\"},  \n    {\"code\": \"WF\", \"en\": \"Wallis and Futuna\", \"cn\": \"\"},  \n    {\"code\": \"WS\", \"en\": \"Samoa\", \"cn\": \"\"},  \n    {\"code\": \"YE\", \"en\": \"Yemen\", \"cn\": \"\"},  \n    {\"code\": \"YT\", \"en\": \"Mayotte\", \"cn\": \"\"},  \n    {\"code\": \"ZA\", \"en\": \"South Africa\", \"cn\": \"\"},  \n    {\"code\": \"ZM\", \"en\": \"Zambia\", \"cn\": \"\"},  \n    {\"code\": \"ZW\", \"en\": \"Zimbabwe\", \"cn\": \"\"}  \n]\n\nexport const City = [\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"},\n    {\"name\":\"\"}\n]\n","import React from 'react'\nimport './popup.css'\nexport default function Popup(props) {\n    return(props.trigger)? (\n        <div className=\"popup\" id=\"popup2\">\n                {props.children}\n        </div>\n    ):\"\";\n}\n","import './profile.css'\nimport Topbar from \"../../components/topbar/Topbar\"\nimport Sidebar from \"../../components/sidebar/Sidebar\"\nimport Feed from \"../../components/feed/Feed\"\nimport Rightbar from \"../../components/rightbar/Rightbar\"\nimport { useState,useEffect } from 'react'\nimport axios from 'axios'\nimport { useParams} from 'react-router'\nimport { TextField, Button,IconButton,CircularProgress } from '@material-ui/core'\nimport { Edit,LocationCity,Language,FavoriteBorder,HighlightOff,PhotoLibrary,Message} from '@material-ui/icons'\nimport { Countries ,City} from '../../dummyData'\nimport Popup from '../../components/popup/Popup'\nimport { useRef } from 'react'\nimport { useHistory } from 'react-router-dom'\nexport default function Profile() {\n    const history = useHistory();\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"))\n    const [user,setUser] = useState({});\n    const [popup,setPopup] = useState(false);\n    const username = useParams().username;\n    \n    //\n    const [editProfile,setEditProfile] = useState(null);\n    const [editCover,setEditCover] = useState(null);\n    const [isLoading,setIsLoading] = useState(false);\n    const country = useRef();\n    const city = useRef();\n    const desc = useRef();\n    const relationship = useRef();\n\n    const handleEditFile = async()=>{\n        setIsLoading(true)\n        // \n        let coverUrl = null\n        let profileUrl = null\n        if(editProfile===null || editProfile===undefined){\n            console.log(\"\")\n        }else{\n            // imgur api \n            const form = new FormData()\n            form.append(\"image\",editProfile)\n            const url = await fetch(\"https://api.imgur.com/3/image/\",{\n                method:\"post\",\n                headers:{\n                    Authorization:\"Client-ID 9235f4e0c03ab68\" \n                }\n                ,body:form\n                }).then(data=>data.json())\n            profileUrl = url\n        }\n        if(editCover===null || editCover===undefined){\n            console.log(\"\")\n        }else{\n            const form = new FormData()\n            form.append(\"image\",editCover)\n            const url = await fetch(\"https://api.imgur.com/3/image/\",{\n                method:\"post\",\n                headers:{\n                    Authorization:\"Client-ID 9235f4e0c03ab68\" \n                }\n                ,body:form\n                }).then(data=>data.json())\n            coverUrl = url\n        }\n        //\n        console.log(coverUrl,profileUrl)\n        if(coverUrl!==null){\n            currentUser.coverPicture = coverUrl.data.link\n        }\n        if(profileUrl!==null){\n            currentUser.profilePicture = profileUrl.data.link\n        } \n        currentUser.from = country.current.value\n        currentUser.city = city.current.value\n        currentUser.relationship = relationship.current.value\n        currentUser.desc = desc.current.value\n        console.log(currentUser)\n        localStorage.setItem(\"user\",JSON.stringify(currentUser))\n        //\n        const updateResult = await axios.put('/api/users/',currentUser)\n        console.log(updateResult)\n        setPopup(false)\n        setIsLoading(false)\n        window.location.reload()\n    }\n\n\n    useEffect(()=>{\n        //jwt token\n        // \n        const fetchUser = async ()=>{\n            const res = await axios.get(\n                `/api/users?username=${username}`,\n            );\n            //console.log(res.data.data)\n            setUser(res.data.data)\n        };\n        fetchUser();\n    },[username]) //render\n\n    const openChat = ()=>{\n        const setChat = async()=>{\n            try{\n                let res = await axios.get(`/api/conversations/find/${currentUser._id}/${user._id}`);\n                // \n                if (res.data.data==null){\n                    const data  = {\n                        senderId:user._id,\n                        receiverId:currentUser._id\n                    }\n                    res = await axios.post(\"/api/conversations/\",data)\n                }\n                //\n                //\n                history.push({\n                    pathname: '/messenger',\n                    state: { chat: res.data.data }\n                })\n            }catch(err){\n                console.log(err)\n            }\n        }\n        setChat()\n    }\n    return (\n        <>\n        <Topbar/>\n        <div className=\"profile\">\n            <Sidebar/>\n            <div className=\"profileRight\">\n                <div className=\"profileRightTop\">\n                    <div className=\"profileCover\">\n                        <img src={ user.coverPicture ? user.coverPicture : \"https://i.imgur.com/kM5r80s.jpg\"}\n                             alt=\"\" \n                             className=\"profileCoverImg\" \n                        />\n                        <img src={ user.profilePicture? user.profilePicture :\"https://i.imgur.com/HeIi0wU.png\"}\n                             alt=\"\" \n                             className=\"profileUserImg\" \n                        />\n                    </div>\n                    <div className=\"profileInfo\">\n                        <h4 className=\"profileInfoName\">{user.username}</h4>\n                        <span className=\"profileInfoDesc\">{user.desc}</span>\n                        <div className=\"profileFunction\">\n                        { user._id!==currentUser._id && <Button startIcon={<Message/>} onClick={openChat} ></Button> }\n                        {currentUser.username === user.username &&(\n                            <>\n                            <Button startIcon={<Edit/>} onClick={()=>setPopup(true)}></Button>\n                            <Popup trigger={popup}>\n                                <div className=\"editProfile\">\n                                    <div className=\"editTitleArea\">\n                                        <h1 className=\"editTitle\"></h1>\n                                        <IconButton aria-label=\"delete\" onClick={()=>setPopup(false)}>\n                                            <HighlightOff/>\n                                        </IconButton>\n                                    </div>\n                                    <hr/>\n                                    <div className=\"editProfileImg\">\n                                        <h2 className =\"editItemTitle\"></h2>\n                                            <div className=\"editProfileImgArea\">\n                                                <img \n                                                    src={ editProfile ? URL.createObjectURL(editProfile) : user.profilePicture } \n                                                    alt=\"\"\n                                                    className=\"editProfileImgDisplay\" \n                                                    \n                                                />\n                                                <label htmlFor=\"file1\" className=\"addProfilePic\">\n                                                    <PhotoLibrary htmlColor=\"tomato\" className=\"shareIcon\"/>\n                                                    <span></span>\n                                                    <input \n                                                        style= {{display:\"none\"}}\n                                                        type=\"file\" id=\"file1\" \n                                                        accept=\".png,.jpeg,.jpg\" \n                                                        onChange={(e)=>setEditProfile(e.target.files[0])}\n                                                    />\n                                                </label>\n                                            </div>\n                                    </div>\n                                    <div className=\"editCoverImg\">\n                                        <h2 className =\"editItemTitle\"></h2>\n                                        <div className=\"editCoverImgArea\">\n                                            <img \n                                                    src={ editCover ? URL.createObjectURL(editCover) : user.coverPicture } \n                                                    alt=\"\"\n                                                    className=\"editCoverImgDisplay\" \n                                            />\n                                            <label htmlFor=\"file2\" className=\"addCoverPic\">\n                                                    <PhotoLibrary className=\"shareIcon\"/>\n                                                    <span></span>\n                                                    <input \n                                                        style= {{display:\"none\"}}\n                                                        type=\"file\" id=\"file2\" \n                                                        accept=\".png,.jpeg,.jpg\" \n                                                        onChange={(e)=>setEditCover(e.target.files[0])}\n                                                    />\n                                            </label>\n                                        </div>\n                                    </div>\n                                    <div className=\"editDesc\">\n                                        <h2 className =\"editItemTitle\"></h2>\n                                        <TextField\n                                            style={{width:\"100%\"}}\n                                            defaultValue={user.desc}\n                                            inputRef={desc}\n                                        />               \n                                    </div>\n                                    <div className=\"editInfo\">\n                                        <h2 className =\"editItemTitle\"></h2>\n                                        <div className=\"editInfoArea\">\n                                            <LocationCity/>\n                                            <span className=\"editInfoTitle\">:</span>\n                                                <select className=\"editInfoOption\" ref={city} defaultValue={user.city}>\n                                                    {City.map(city=>{\n                                                        \n                                                        return(    \n                                                            <option value={city.name} key={city.name}>{city.name}</option>\n                                                        )\n                                                    })}\n                                                </select>\n                                            <Language/>\n                                            <span className=\"editInfoTitle\">:</span>\n                                                <select className=\"editInfoOption\" ref={country}  defaultValue={user.from}>\n                                                    {Countries.map(country=>{\n                                                        return(    \n                                                                    <option value={country.cn} key={country.cn}>{country.cn}</option>\n                                                                )\n                                                    })}\n                                                </select>\n                                            <FavoriteBorder/>\n                                            <span className=\"editInfoTitle\">:</span>\n                                                <select className=\"editInfoOption\" ref={relationship} defaultValue={2}>\n                                                    <option value={2} ></option>\n                                                    <option value={1} ></option>\n                                                </select>\n                                        </div>\n                                        <div className=\"editSend\">\n                                            <Button disabled={isLoading} \n                                                style={{backgroundColor:\"#42b72a\"}}\n                                                onClick={handleEditFile}\n                                            >\n                                                {isLoading ? <CircularProgress color=\"white\" size=\"20px\"/> :\"\"}\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </Popup>\n                            </>\n                        )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"profileRightBottom\">\n                    <Feed username={username}/>\n                    <Rightbar user={user}/> \n                </div>\n            </div>     \n        </div>\n        \n        </>\n    )\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { useRef } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport \"./register.css\"\n\nexport default function Register() {\n    const username = useRef();\n    const email = useRef();\n    const password = useRef();\n    const passwordAgain = useRef();\n    const [error,setError] =useState(null);\n    const [isLoading,setIsLoading] = useState(false);\n    const history = useHistory()\n\n    const checkPassword = ()=>{\n        console.log(password.current.value)\n        console.log(passwordAgain.current.value)\n        console.log(\"test\")\n        if(passwordAgain.current.value !== password.current.value){\n            password.current.setCustomValidity(\"\")\n        }else{\n            password.current.setCustomValidity(\"\")\n        }\n    }\n    const handleClick = async (e) =>{\n        e.preventDefault();\n        setIsLoading(true)\n        console.log(password.current.value)\n        console.log(passwordAgain.current.value)\n        // if(passwordAgain.current.value !== password.current.value){\n        //     password.current.setCustomValidity(\"\")\n        // }else{\n        const user = {\n            username : username.current.value,\n            email : email.current.value,\n            password : password.current.value        \n        }\n        console.log(user)\n        try{\n            const res = await axios.post(\"/auth/local/signup\",user);\n            history.push(\"/login\")\n        }catch(err){\n            // setError(err.response.data.message)\n            console.log(err.response.data.message)\n            setError(err.response.data.message)\n        }\n        setIsLoading(false)\n    }\n    return (\n        <div className=\"login\">\n            <div className=\"loginWrapper\">\n                <div className=\"loginLeft\">\n                    <h3 className=\"loginLogo\">HardCo.Social</h3>\n                    <span className=\"loginDesc\">\n                        HardCo.Social.\n                    </span>\n                </div>\n                <div className=\"loginRight\">\n                    <div className=\"loginBox\">\n                        <form className=\"loginBox\" onSubmit={(e)=>handleClick(e)}>\n                            <input placeholder=\"\" \n                                ref={username}\n                                className=\"loginInput\"\n                                required \n                                minLength=\"3\"\n                                maxLength=\"12\"\n                            />\n                            <input placeholder=\"\" \n                                ref={email} \n                                className=\"loginInput\" \n                                required\n                                type=\"email\"\n                            />\n                            <input placeholder=\"\"    \n                                ref ={password} \n                                className=\"loginInput\" \n                                type=\"password\"\n                                required\n                                minLength=\"8\"\n                            />\n                            <input placeholder=\"\"  \n                                ref={passwordAgain}\n                                className=\"loginInput\" \n                                type=\"password\"\n                                required\n                                onChange={checkPassword}\n                    \n                            />\n                            <button className=\"loginButton\" type=\"submit\">\n                                {isLoading?<CircularProgress color=\"white\" size=\"20px\"/> :\"\" }\n                            </button>\n                        </form>\n                        {error!==null ?<span className=\"errorMessage\">{error}</span> : null}\n                        <Link className=\"loginRegisterLink\" to=\"/login\">\n                        <button className=\"loginRegisterButton\">\n                        {isLoading?<CircularProgress color=\"white\" size=\"20px\"/> :\"\" }\n                        </button>\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import axios from 'axios';\nimport { useEffect , useState} from 'react'\nimport './conversation.css'\n\nexport default function Conversation({conversation ,currentUser}) {\n    const [user,setUser] = useState(null)\n\n\n    useEffect(()=>{\n        const friendId = conversation.members.find(m=> m !== currentUser._id);\n\n        const getUser = async()=>{\n            try{\n                const res = await axios(`/api/users?userId=${friendId}`)\n                setUser(res.data.data)\n            }catch(err){\n                console.log(err)\n            }\n        }\n        getUser();\n    },[currentUser,conversation])\n    return (\n        <div className=\"conversation\">\n            <img  className=\"conversationImg\" src={user&& user.profilePicture!==\"\" ?user.profilePicture :\"https://i.imgur.com/HeIi0wU.png\"} alt=\"\" />\n            <span className=\"conversationName\">{user&& user.username}</span>\n        </div>\n    )\n}\n","import './message.css'\nimport {format} from 'timeago.js'\nexport default function Message({message,own,data}) {\n    return (\n        <div className={own ? \"message own\" : \"message\"}>\n            <div className=\"messageTop\">\n                <div onClick={() => {window.location.href=\"/profile/\"+data.username}} >\n                <img\n                 className=\"messageImg\"\n                 src={data && data.profilePicture!==\"\" ? data.profilePicture : \"https://i.imgur.com/HeIi0wU.png\"}\n                 alt=\"\" \n                />\n                </div>\n                <p className=\"messageText\">\n                    {message.text}\n                </p>\n            </div>\n            <div className=\"messageBottom\">\n                {format(message.createdAt)}\n            </div>\n        </div>\n    )\n}\n","import './chatOnline.css'\nimport axios from 'axios'\nimport { useState,useEffect } from 'react';\nexport default function ChatOnline({onlineUsers , currentId, setCurrentChat,switchChat}) {\n    const [friends,setFriends] = useState([]);\n    const [onlineFriends,setOnlineFriends] = useState([]);\n\n    useEffect(()=>{\n        const getFriends = async ()=>{\n            const res = await axios.get(\"/api/users/friends/\"+currentId)\n            setFriends(res.data.data)\n        }\n        getFriends();\n    },[currentId])\n    \n    useEffect(()=>{\n        setOnlineFriends(friends.filter(f=>onlineUsers.includes(f._id)))\n    },[friends,onlineUsers])\n\n    const handleClick = async(user)=>{\n        try{\n            let res = await axios.get(`/api/conversations/find/${currentId}/${user._id}`);\n            // \n            if (res.data.data==null){\n                console.log(\"\")\n                const data  = {\n                    senderId:user._id,\n                    receiverId:currentId\n                }\n                res = await axios.post(\"/api/conversations/\",data)\n            }\n            switchChat(res.data.data)\n        }catch(err){\n            console.log(err)\n        }\n    }\n    return (\n        <div className=\"chatOnline\">\n            {friends.map( (o) =>(\n            <div className=\"chatOnlineFriend\" key={o._id} onClick={()=>handleClick(o) }>\n                <div className=\"chatOnlineImgContainer\">\n                    <img \n                        className=\"chatOnlineImg\"\n                        src={ o.profilePicture!==\"\" \n                            ? o.profilePicture \n                            :\"https://i.imgur.com/HeIi0wU.png\"\n                        }\n                        alt=\"\" \n                    />\n                    {onlineUsers.includes(o._id) &&<div className=\"chatOnlineBadge\"></div>}\n                </div>\n                <span className=\"chatOnlineName\">{o.username}</span>\n            </div> \n            ))}\n        </div>\n    )\n}\n","import './messenger.css'\nimport Topbar from \"../../components/topbar/Topbar\"\nimport Conversation from '../../components/conversations/Conversation'\nimport Message from '../../components/message/Message'\nimport ChatOnline from '../../components/chatOnline/ChatOnline'\nimport { useState,useEffect,useRef} from 'react'\nimport axios from 'axios'\nimport {io} from 'socket.io-client'\nimport { useLocation } from 'react-router-dom'\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { CircularProgress } from '@material-ui/core'\nimport { message } from 'statuses'\nimport InfiniteScrollReverse from \"react-infinite-scroll-reverse\";\nexport default function Messenger() {\n    let location = useLocation();\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    const [conversations,setConversations] = useState([]);\n    const [currentChat,setCurrentChat] = useState(null);\n    const [currentData,setCurrentData] = useState(null);\n    const [chatQuery,setChatQuery] = useState(\"m\");\n    const [messages,setMessages] = useState([]);\n    const [messagePage,setMessagePage] = useState(1);\n    const [messageHasMore,setMessageHasMore] = useState(true);\n    const [onlineUsers,setOnlineUsers] = useState([]);\n    const [arrivalMessage,setArrivalMessage] = useState(null);\n    const newMessage = useRef(\"\");\n    const socket = useRef();\n    const scrollRef = useRef();\n    useEffect(()=>{\n        socket.current = io(process.env.REACT_APP_SOCKET_PORT) //andqport \n        socket.current.on(\"getMessage\",data=>{\n            setArrivalMessage({\n                sender: data.senderId,\n                text: data.text,\n                createdAt: Date.now(),\n            })\n        })\n    },[])\n\n    useEffect(()=>{\n        arrivalMessage && currentChat?.members.includes(arrivalMessage.sender)&&\n        setMessages(prev=>[...prev,arrivalMessage])\n    },[arrivalMessage,currentChat])\n\n    useEffect(()=>{\n        socket.current.emit(\"addUser\",user._id)\n        socket.current.on(\"getUsers\",users=>{\n            setOnlineUsers(\n                user.friends.filter((f)=> users.some((u)=>u.userId===f))\n            );\n        })\n    },[])\n    \n    useEffect(()=>{\n        if(currentChat){\n            const getMessages = async()=>{\n                try{\n                    const res = await axios.get('/api/messages/'+currentChat._id+\"/\"+0)\n                    setMessages(res.data.data)\n                }catch(err){\n                    console.log(err)\n                }\n            };\n            getMessages();\n        }else{\n            console.log(\"\")\n        }\n    },[currentChat]);\n    useEffect(()=>{\n        const getConversations = async()=>{\n            try{\n                const res = await axios.get('/api/conversations/'+user._id)\n                setConversations(res.data.data)\n            }catch(err){\n                console.log(err)\n            }\n            \n        }\n        getConversations()\n    },[user._id])\n    useEffect(()=>{\n        scrollRef?.current?.scrollIntoView({behavior:\"smooth\"});\n    },[messages])\n    const handleSubmit = async(e)=>{\n        e.preventDefault();\n        console.log(newMessage.current.value)\n        const message = {\n            sender: user._id,\n            text: newMessage.current.value,\n            conversationId : currentChat._id,\n        };\n        const receiverId = currentChat.members.find(\n            (member)=> member !== user._id\n        );\n\n        socket.current.emit(\"sendMessage\",{\n            senderId: user._id,\n            receiverId,\n            text:newMessage.current.value,\n        })\n        console.log(user._id)\n        console.log(receiverId)\n        try{\n            const res = await axios.post(\"/api/messages\",message);\n            setMessages([...messages,res.data.data])\n            newMessage.current.value=\"\"\n            if(!onlineUsers.includes(receiverId)){\n                const  sendNotice = async ()=>{\n                    const notice = {\n                        senderId : user._id,\n                        object : \"message\",\n                        senderPic : user.profilePicture,\n                        senderUsername : user.username,\n                        receiverId\n                    }\n                    await axios.post('/api/notice',notice)\n                }\n                sendNotice()\n            }\n        }catch(err){\n            console.log(err)\n        }\n    };\n    useEffect(()=>{\n        try{\n            if (location.state.chat){\n                console.log(location.state.chat)\n                switchChat(location.state.chat)\n            }else{\n                console.log(\"\bwrong\")\n            }\n        }catch(err){\n            console.log(err)\n        }\n    },[])\n    const enterSubmit = async(event)=>{\n        if(event.key === 'Enter'){\n            handleSubmit(event)\n        }\n    }\n    const switchChat = (c)=>{\n        setCurrentChat(c)\n        //chat ( own ownuser.pc\n        //user message request\n        const friendId = c.members.find(m=> m !== user._id);\n        const getUser = async()=>{\n            try{\n                const res = await axios(`/api/users?userId=${friendId}`)\n                setCurrentData(res.data.data)\n            }catch(err){\n                console.log(err)\n            }\n        }\n        getUser();\n    }\n    const fetchMessageData = async()=>{\n        const getMessages = async()=>{\n            try{\n                 const res = await axios.get('/api/messages/'+currentChat._id+\"/\"+messagePage)\n                 console.log(res.data.data)\n                 if(res.data.data.length===0){\n                     setMessageHasMore(false)\n                 }\n                 \n                 setMessages(prevMessages=>{\n                     return([...prevMessages,...res.data.data])\n                 });\n                 console.log(messages)\n                 setMessagePage(messagePage+1)\n                 console.log(messagePage)\n            }catch(err){\n                console.log(err)\n            }\n        } \n        getMessages()\n    }\n    return (\n        <>\n        <Topbar/>\n        <div className=\"messenger\">\n            <div className=\"chatMenu\">\n                <div className=\"chatMenuWrapper\">\n                    {/* <input placeholder=\"\" className=\"chatMenuInput\" type=\"text\" /> */}\n                    <h4 className=\"chatSidebarTitle\"></h4>\n                    <hr/>\n                    {/* queryfilter? */}\n                    {conversations.map((c)=>(\n                        <div onClick={()=>switchChat(c)} key={c._id}>\n                            <Conversation conversation={c} currentUser={user} />\n                        </div>\n                    ))}\n                </div>\n            </div>\n            <div className=\"chatBox\">\n                <div className=\"chatBoxWrapper\">\n                    {\n                        currentChat\n                    ?    \n                    <>\n                    <div className=\"chatBoxTop\"  id=\"scrollableDiv\" >\n                        {/* infintite scroll */}\n                        {/* <InfiniteScroll\n                        dataLength={messages.length} //This is important field to render the next data\n                        next={()=>fetchMessageData()}\n                        hasMore={messageHasMore}\n                        loader={<div className=\"onLoading\"><CircularProgress  size=\"20px\"/></div>}\n                        \n                        scrollableTarget=\"scrollableDiv\"\n                        // endMessage={\n                        // <p style={{ textAlign: 'center' }}>\n                        //     <b> \"\" </b>\n                        // </p>\n                        // }\n                        > */}\n                        {messages.map((m)=>(\n                            <div ref={scrollRef} key={m._id} >\n                            <Message message={m} own={m.sender === user._id} data={m.sender === user._id ?user:currentData} />\n                            </div>\n                        ))}\n                        {/* </InfiniteScroll> */}\n                        \n                    </div>\n                    <div className=\"chatBoxBottom\">\n                        <textarea \n                            className=\"chatMessageInput\" \n                            placeholder=\"...\"\n                            ref = {newMessage}\n                            defaultValue  = {newMessage.current.value}\n                            onKeyPress={enterSubmit}\n                        >\n                        </textarea>\n                        <button className=\"chatSubmitButton\" onClick={handleSubmit}></button>\n                    </div>\n    \n                    </>\n                    :(\n                        <span className=\"noConversationText\"></span>\n                    )}\n                </div> \n            </div>\n            <div className=\"chatOnline\">\n                <div className=\"chatOnlineWrapper\">\n                <h4 className=\"chatSidebarTitle\"></h4>\n                <hr/>\n                    <ChatOnline \n                        onlineUsers={onlineUsers} \n                        currentId={user._id} \n                        setCurrentChat= {setCurrentChat}\n                        switchChat = {switchChat}\n                    />\n                </div>\n            </div>\n        </div>\n        </>\n    )\n}\n","import './singlePost.css'\nimport Topbar from \"../../components/topbar/Topbar\"\nimport Post from \"../../components/post/Post\"\nimport { useParams } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { useState } from 'react';\nexport default function SinglePost() {\n    //postid\n    const [post,setPost] = useState(null)\n    const postId = useParams().postId;\n    useEffect(() => {\n       const getPost = async()=>{\n           const res = await axios.get('/api/posts/'+postId)\n           setPost(res.data.data)\n       }\n       getPost()\n    }, [postId])\n    return (\n        <>\n        <Topbar/>\n        <div className = \"singlePost\">\n            <div className=\"singlePostLeft\"> \n            </div>\n            <div className=\"singlePostCenter\">\n                {post && <Post post ={post}/>}  \n            </div>\n            <div className=\"singlePostRight\">\n\n            </div>\n        </div>\n        </>\n    )\n}\n","import Home from './pages/home/Home'\nimport Login from './pages/login/Login';\nimport Profile from './pages/profile/Profile';\nimport Register from './pages/register/Register';\nimport Messenger from './pages/\bmessenger/Messenger';\nimport{\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\nimport axios from 'axios';\nimport SinglePost from './pages/singlePost/SinglePost';\nfunction App() {\n  const user = JSON.parse(localStorage.getItem(\"user\"))\n  const token = localStorage.getItem(\"token\")\n  //console.log(token)\n  //const jwt = process.env.REACT_APP_EXAMPLE_JWT\n  //axiosproxy\n  if(token!==null){\n    console.log(\"\")\n    axios.interceptors.request.use(function (config) {\n    config.headers.Authorization = \"Bearer \"+token  ;\n    return config;\n  });\n  }\n  // axios.interceptors.request.use(function (config) {\n  //   config.headers.Authorization = \"Bearer \"+token  ;\n  //   return config;\n  // });\n  axios.defaults.baseURL=process.env.REACT_APP_API\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          {/* loginHome */}\n          {user? <Home/> : <Register/> }\n        </Route>\n        <Route path=\"/login\">\n          {user? <Redirect to=\"/\"/> :<Login/>}\n        </Route>\n        <Route path=\"/register\">\n          {user? <Redirect to=\"/\"/> :<Register/>}  \n        </Route>\n        <Route path=\"/messenger\">\n          {!user? <Redirect to=\"/\" /> : <Messenger/>}\n        </Route>\n        <Route path=\"/profile/:username\">\n          <Profile/>\n        </Route>\n        <Route path=\"/post/:postId\">\n          <SinglePost/>\n        </Route>\n        <Route path=\"/\">\n          <Home/>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {AuthContextProvider} from './context/AuthContext'\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n     <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}